<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Data Dashboard</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f7f6; }
        .controls { margin-bottom: 20px; display: flex; gap: 10px; }
        input { padding: 8px; width: 300px; }
        button { padding: 8px 15px; cursor: pointer; width: 160px; white-space: nowrap;}
        .link-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .card { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        a { text-decoration: none; color: #0077cc; font-weight: bold; }
    </style>
</head>
<body>

    <h2>Weather Resources</h2>

    <div class="controls">
    <input type="text" id="searchInput" placeholder="Search..." onkeyup="filterLinks()">
    <button id="sortBtn" onclick="toggleSort()">Sort by Type</button>
</div>

<div class="link-grid" id="linkGrid">
    <div class="card" data-name="SPC Mesoanalysis" data-type="Observations">
    <a href="https://www.spc.noaa.gov/exper/mesoanalysis/" target="_blank" rel="noopener noreferrer">SPC Mesoanalysis</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="COD Models" data-type="Models">
    <a href="https://weather.cod.edu/forecast" target="_blank" rel="noopener noreferrer">COD Models</a>
    <br><small>Type: Models</small>
    </div>

    <div class="card" data-name="Pivotal Weather" data-type="Models">
    <a href="https://www.pivotalweather.com/model.php" target="_blank" rel="noopener noreferrer">Pivotal Weather</a>
    <br><small>Type: Models</small>
    </div>

    <div class="card" data-name="NWS LOT" data-type="Observations">
    <a href="https://www.weather.gov/lot/" target="_blank" rel="noopener noreferrer">NWS LOT</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="Climate Data Online" data-type="Data">
    <a href="https://www.ncei.noaa.gov/cdo-web/" target="_blank" rel="noopener noreferrer">Climate Data Online</a>
    <br><small>Type: Data</small>
    </div>

    <div class="card" data-name="Triton" data-type="Coding">
    <a href="https://triton.niu.edu" target="_blank" rel="noopener noreferrer">Triton</a>
    <br><small>Type: Coding</small>
    </div>

    <div class="card" data-name="BAMS" data-type="Journals">
    <a href="https://www.ametsoc.org/ams/publications/journals/bulletin-of-the-american-meteorological-society-bams/" target="_blank" rel="noopener noreferrer">BAMS</a>
    <br><small>Type: Journals</small>
    </div>

    <div class="card" data-name="COD Satellite" data-type="Observations">
    <a href="https://weather.cod.edu/satrad/" target="_blank" rel="noopener noreferrer">COD Satellite</a>
    <br><small>Type: Observations</small>
    </div>  

    <div class="card" data-name="COD Analysis" data-type="Observations">
    <a href="https://weather.cod.edu/analysis/" target="_blank" rel="noopener noreferrer">COD Analysis</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="COD Exper Text" data-type="Observations">
    <a href="https://weather.cod.edu/text/exper" target="_blank" rel="noopener noreferrer">COD Exper Text</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="Drought Monitor" data-type="Observations">
    <a href="https://droughtmonitor.unl.edu/" target="_blank" rel="noopener noreferrer">Drought Monitor</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="COD Radar" data-type="Observations">
    <a href="https://weather.cod.edu/satrad/nexrad/" target="_blank" rel="noopener noreferrer">COD Radar</a>
    <br><small>Type: Observations</small>
    </div>

    <div class="card" data-name="MesoWest" data-type="Observations">
    <a href="https://mesowest.utah.edu/" target="_blank" rel="noopener noreferrer">MesoWest</a>
    <br><small>Type: Observations</small>
    </div>
</div>

<script>
    // Set the initial state to 'name' so that the first call to toggleSort() 
// switches it to 'type' and performs the initial sort.
let currentSort = 'name'; 

function filterLinks() {
    let input = document.getElementById('searchInput').value.toLowerCase().trim();
    let cards = document.querySelectorAll('.card');

    cards.forEach(card => {
        let name = card.getAttribute('data-name').toLowerCase().trim();
        let type = card.getAttribute('data-type').toLowerCase().trim();
        card.style.display = (name.includes(input) || type.includes(input)) ? "" : "none";
    });
}

function toggleSort() {
    let grid = document.getElementById('linkGrid');
    let btn = document.getElementById('sortBtn');
    let cards = Array.from(grid.querySelectorAll('.card'));

    if (currentSort === 'name') {
        // Sort by Type first, then Name
        cards.sort((a, b) => {
            let typeCompare = a.getAttribute('data-type').localeCompare(b.getAttribute('data-type'));
            return typeCompare !== 0 ? typeCompare : a.getAttribute('data-name').localeCompare(b.getAttribute('data-name'));
        });
        currentSort = 'type';
        btn.innerText = "Sort Alphabetically";
    } else {
        // Sort Alphabetically by Name
        cards.sort((a, b) => a.getAttribute('data-name').localeCompare(b.getAttribute('data-name')));
        currentSort = 'name';
        btn.innerText = "Sort by Type";
    }

    // Clear and re-append sorted cards
    grid.innerHTML = "";
    cards.forEach(card => grid.appendChild(card));
}

toggleSort();
</script>
</body>
</html>
